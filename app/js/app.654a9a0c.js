(function(e){function t(t){for(var i,r,o=t[0],l=t[1],d=t[2],u=0,v=[];u<o.length;u++)r=o[u],n[r]&&v.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(v.length)v.shift()();return s.push.apply(s,d||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},n={app:0},s=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=l;s.push([2,"chunk-vendors"]),a()})({0:function(e,t){},"034f":function(e,t,a){"use strict";var i=a("5da9"),n=a.n(i);n.a},1:function(e,t){},2:function(e,t,a){e.exports=a("56d7")},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return a(t)}function s(e){var t=i[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("96cf");var i=a("3040"),n=(a("cadf"),a("551c"),a("097d"),a("2b0e")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:"",scrollOffScreen:""}},[a("img",{staticClass:"clickable",staticStyle:{height:"50%",margin:"10px 0"},attrs:{src:"https://cdn.sensorable.io/assets/brand/sensorable-logo.png"},on:{click:function(t){return e.$router.push({name:"home"})}}}),a("v-toolbar-title",{staticClass:"hidden-xs"},[e._v(e._s(e.appName))]),a("v-spacer"),a("v-btn",{attrs:{icon:""}},[a("v-icon",[e._v("search")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$router.push({name:"home"})}}},[a("v-icon",[e._v("apps")])],1),e.$store.state.loggedin?a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialogLogout=!0}}},[a("v-icon",[e._v("exit_to_app")])],1):e._e()],1),a("v-container",{staticClass:"text-xs-center ma-0 pa-0",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[a("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[a("v-content",{attrs:{app:""}},[a("v-alert",{attrs:{value:""!=e.userEmail&&!e.emailVerified,type:"error"}},[a("p",[a("b",[e._v(e._s(e.userEmail))]),e._v(" doesn't have access to this system yet. Please, click on the verification link we emailed you.\n            ")]),a("p",[a("v-btn",{attrs:{disabled:"",outline:"",color:"white"}},[e._v("Resend verification email")]),a("v-btn",{attrs:{outline:"",color:"white"},on:{click:function(t){return t.stopPropagation(),e.signOut(t)}}},[e._v("Log in as a different user")])],1)]),e.$store.state.loggedin&&e.hydrated?a("div",[a("router-view",{key:e.$route.path})],1):e._e()],1)],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-transition",scrollable:"",fullscreen:e.$vuetify.breakpoint.smAndDown,width:"600","max-width":"600"},model:{value:e.dialogLogout,callback:function(t){e.dialogLogout=t},expression:"dialogLogout"}},[a("v-card",[a("v-card-text",{staticClass:"text-xs-center mb-3"},[a("h3",{staticClass:"headline text-xs-center mt-3 mb-4"},[e._v("You are logged in as "+e._s(e.userEmail))]),a("v-btn",{attrs:{color:"info"},on:{click:function(t){t.stopPropagation(),e.dialogLogout=!1}}},[e._v("Stay logged in")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){return t.stopPropagation(),e.signOut(t)}}},[e._v("Log out")])],1)],1)],1)],1)},r=[],o=(a("28a5"),a("a481"),a("386d"),{graphqlEndpoint:"https://7eq2atggmzdq5oyx6kaf3mj7ny.appsync-api.us-east-1.amazonaws.com/graphql",mediaBaseDomain:"photos.sensorable.io",region:"us-east-1",authenticationType:"AMAZON_COGNITO_USER_POOLS",UserPoolId:"us-east-1_8L0vjEjK2",ClientId:"4852gt89j5ojrlmsb2go148p0o",AppWebDomain:"sensorable.auth.us-east-1.amazoncognito.com",TokenScopesArray:["email","profile","openid"],RedirectUriSignIn:"https://sensorable.io/app/",RedirectUriSignOut:"https://sensorable.io/",GoogleMapsKey:"AIzaSyAqUUhH5NQ9ExiU-NT9qKoIVAjUUcZ76SY",errorPolicy:"all",appName:"Sensorable Cam Viewer",SentryDSN:"https://26f07b29c4b74f908a5d27f50323c8d8@sentry.io/1484295",MatomoHost:"https://sensorable.matomo.cloud",MatomoSiteId:"1"}),l=a("82dc"),d=a("b994"),c=a.n(d),u=(a("6762"),a("2fdb"),a("f751"),a("f559"),a("0a89")),v=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("UserDevices")],1)],1)],1)},p=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-lg":"",fluid:"","justify-space-between":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.data.listUserDevices.items,function(t){return a("v-flex",{key:t.device,attrs:{xs4:e.$vuetify.breakpoint.mdAndUp,xs6:e.$vuetify.breakpoint.sm,xs12:e.$vuetify.breakpoint.xs}},[a("DeviceInfo",{attrs:{devId:t.device}})],1)}),1)],1)},f=[],g=a("6eec"),b=a("9530"),_=a.n(b),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("div",[a("div",{staticStyle:{width:"100%"}},[e.showTabs?a("v-tabs",{attrs:{centered:"",color:"cyan",dark:"","icons-and-text":"","show-arrows":"","slider-color":"yellow"}},[a("v-tab",{on:{click:function(t){e.data.showImg=!e.data.showImg}}},[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("View")]):e._e(),a("v-icon",[e._v("image")])],1),a("v-tab",[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Location")]):e._e(),a("v-icon",[e._v("place")])],1),a("v-tab",[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Users")]):e._e(),a("v-icon",[e._v("people")])],1),a("v-tab",[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Settings")]):e._e(),a("v-icon",[e._v("settings")])],1),a("v-tab",[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Device")]):e._e(),a("v-icon",[e._v("build")])],1),e.data.hydrated?a("v-tabs-items",{key:e.devIdComputed,attrs:{touchless:""}},[a("v-tab-item",{attrs:{transition:!1,"reverse-transition":!1}},[a("device-img",{attrs:{state:e.data.getLatestDeviceState,showImg:e.data.showImg}})],1),a("v-tab-item",{attrs:{transition:!1,"reverse-transition":!1}},[a("Gmap",{attrs:{loc:e.data.getLatestDeviceState.items[0].loc}})],1),a("v-tab-item",{attrs:{transition:!1,"reverse-transition":!1}},[a("DeviceUsers",{attrs:{devId:this.devIdComputed}})],1),a("v-tab-item",{attrs:{transition:!1,"reverse-transition":!1}},[a("DeviceSettings",{attrs:{devId:this.devIdComputed}})],1),a("v-tab-item",{attrs:{transition:!1,"reverse-transition":!1}},[a("DeviceState",{attrs:{state:e.data.getLatestDeviceState}})],1)],1):e._e()],1):a("device-img",{attrs:{state:e.data.getLatestDeviceState,showImg:!0}}),a("v-card-title",{staticClass:"text-xs-center",attrs:{"primary-title":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h2",{staticClass:"headline mb-1 mt-3"},[a("router-link",{attrs:{to:{name:"device",params:{devId:e.devIdComputed}}}},[e._v(e._s(this.devIdComputed))])],1)]),a("v-flex",{attrs:{xs12:""}},[e.data.hydrated&&e.data.getLatestDeviceState.items[0].timestamp?a("v-chip",{attrs:{label:"",outline:"",color:"accent"}},[a("v-icon",{attrs:{left:""}},[e._v("access_time")]),e._v("\n              "+e._s(e._f("tsToTimeDate")(e.data.getLatestDeviceState.items[0].timestamp))+"\n            ")],1):e._e(),e.data.hydrated&&e.data.getLatestDeviceState.items[0].volt?a("v-chip",{attrs:{label:"",outline:"",color:"accent"}},[a("sup",{staticClass:"mr-2"},[e._v(e._s(e.cellType()))]),a("v-icon",{staticClass:"fal mr-3",attrs:{small:"",left:""}},[e._v("fa-signal-"+e._s(e.cellIcon()))]),a("v-icon",{staticClass:"fal mr-3 fa-rotate-270",attrs:{small:"",left:""}},[e._v("fa-battery-"+e._s(e.voltIcon()))]),a("v-icon",{staticClass:"fal",attrs:{small:"",left:""}},[e._v("fa-thermometer-"+e._s(e.tempIcon()))])],1):e._e()],1)],1)],1)],1)]),a("v-alert",{attrs:{value:e.data.error,type:"error"}},[e._v("Device "+e._s(this.devId)+" could not be loaded.")])],1)},S=[];a("c5f6"),a("04ff");function D(){var e=Object(g["a"])(["\n  mutation($device: String!, $filename: String!) {\n    reqMediaDownload(device: $device, filename: $filename)\n  }\n"]);return D=function(){return e},e}function w(){var e=Object(g["a"])(["\n  query listDeviceSpeedLast90Days($device: String!) {\n    listDeviceSpeedLast90Days(device: $device) {\n      items {\n        timestamp\n      }\n    }\n  }\n"]);return w=function(){return e},e}function C(){var e=Object(g["a"])(["\n  query listDeviceSpeedDay($device: String!, $timestampFrom: String!, $timestampTo: String!) {\n    listDeviceSpeedDay(device: $device, timestampFrom: $timestampFrom, timestampTo: $timestampTo) {\n      ...fragDeviceSpeedSumList\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function I(){var e=Object(g["a"])(["\n  query listDeviceSpeedHr($device: String!, $timestampFrom: String!, $timestampTo: String!) {\n    listDeviceSpeedHr(device: $device, timestampFrom: $timestampFrom, timestampTo: $timestampTo) {\n      ...fragDeviceSpeedSumList\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function x(){var e=Object(g["a"])(["\n  query listDeviceSpeedMin($device: String!, $timestampFrom: String!, $timestampTo: String!) {\n    listDeviceSpeedMin(device: $device, timestampFrom: $timestampFrom, timestampTo: $timestampTo) {\n      ...fragDeviceSpeedSumList\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=Object(g["a"])(["\n  fragment fragDeviceSpeedSumList on DeviceSpeedSumList {\n    items {\n      device\n      timestamp\n      minSpeed\n      maxSpeed\n    }\n  }\n"]);return k=function(){return e},e}function j(){var e=Object(g["a"])(["\n  query listDeviceSpeed($device: String!, $timestampFrom: String!, $timestampTo: String!) {\n    listDeviceSpeed(device: $device, timestampFrom: $timestampFrom, timestampTo: $timestampTo) {\n      ...fragDeviceSpeedList\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function R(){var e=Object(g["a"])(["\n  fragment fragDeviceSpeedList on DeviceSpeedList {\n    items {\n      device\n      timestamp\n      speed\n    }\n  }\n"]);return R=function(){return e},e}function $(){var e=Object(g["a"])(["\n  mutation($email: String!, $device: String!) {\n    delDeviceUser(email: $email, device: $device) {\n      ...fragUserFields\n    }\n  }\n  ","\n"]);return $=function(){return e},e}function M(){var e=Object(g["a"])(["\n  mutation($email: String!, $device: String!, $role: String) {\n    putDeviceUser(email: $email, device: $device, role: $role) {\n      ...fragUserFields\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function U(){var e=Object(g["a"])(["\n  query listDeviceUsers($device: String!) {\n    listDeviceUsers(device: $device) {\n      ...fragUserFields\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function T(){var e=Object(g["a"])(["\n  fragment fragUserFields on DeviceUsers {\n    items {\n      email\n      role\n      created\n      creator\n    }\n  }\n"]);return T=function(){return e},e}function A(){var e=Object(g["a"])(["query listMediaUploads($device: String!, $plate: String!)\n{\n  listMediaUploadsByPlate(device: $device, plate: $plate) {\n    items {\n      ...fragMediaUpload\n    }\n  }\n}\n","\n"]);return A=function(){return e},e}function O(){var e=Object(g["a"])(["query listMediaUploads($device: String!, $timestampFrom: String!, $timestampTo: String!)\n{\n  listMediaUploadsWithSpeed(device: $device, timestampFrom: $timestampFrom, timestampTo: $timestampTo) {\n    items {\n      ...fragMediaUpload\n    }\n  }\n}\n","\n"]);return O=function(){return e},e}function P(){var e=Object(g["a"])(["query listMediaUploads($device: String!, $limit: Int!, $timestamp: String! )\n{\n  listMediaUploads(device: $device, limit: $limit, timestamp: $timestamp) {\n    items {\n      ...fragMediaUpload\n    }\n  }\n}\n","\n"]);return P=function(){return e},e}function q(){var e=Object(g["a"])(["query getLatestMediaUpload($device: String)\n{\n  getLatestMediaUpload(device: $device) {\n    items {\n      ...fragMediaUpload\n    }\n  }\n}\n","\n"]);return q=function(){return e},e}function E(){var e=Object(g["a"])(["query getLatestDeviceState($device: String)\n{\n  getLatestDeviceState(device: $device) {\n    items {\n      device\n      timestamp\n      version\n      mem\n      temp\n      volt\n      loc {\n        altitude\n        lat\n        lon\n      }\n      cell {\n        asu\n        cells\n        operator\n        pci\n        signal\n        state\n        type\n      }\n    },\n    media {\n      ...fragMediaUpload\n    }\n  }\n}\n","\n"]);return E=function(){return e},e}function L(){var e=Object(g["a"])(["\n  fragment fragMediaUpload on MediaUpload {\n    device\n    timestamp\n    eventTimestamp\n    date\n    name\n    type\n    plate\n    speed\n    fileReqUtc\n  }\n"]);return L=function(){return e},e}function F(){var e=Object(g["a"])(["\n  mutation($device: String!, $setting: String!, $value: String!) {\n    putDeviceConfig(device: $device, setting: $setting, value: $value) {\n      ...fragDeviceInfo\n    }\n  }\n  ","\n"]);return F=function(){return e},e}function B(){var e=Object(g["a"])(["\n  query getDeviceInfo($device: String!) {\n    getDeviceInfo(device: $device) {\n      ...fragDeviceInfo\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function V(){var e=Object(g["a"])(["\n  fragment fragDeviceInfo on DeviceInfo {\n    device\n    desc\n    type\n    customer\n    user {\n      role\n    }\n    config {\n      BleActivations\n      BleDelay\n      BleDeviceAddresses\n      BleDuration\n      BleFlex\n      BleMaxFrequency\n      BleMinActivations\n      BleMinActivationsDuration\n      BleOn\n      CamAspectRatio\n      CamExposureMode\n      CamFocusMode\n      CamFormat\n      CamMode\n      CamRepeatCount\n      CamRepeatFPS\n      CamRepeatLocked\n      CamReso\n      EnableVideoUpload\n      DisplayDuration\n      DCRawArgs\n      EnableDataUpload\n      EnableRadar\n      ImageCropRegion\n      JPEGQuality\n      LocationUpdateInterval\n      NumberPlateMinConfidence\n      Pause\n      RadarMaxFrequency\n      RadarMinSpeed\n      RadioAlwaysOn\n      RetryUploadForTypes\n      ScheduleInterval\n      ScheduleReso\n      ScheduleFrom\n      ScheduleTo\n      ScheduleTimes\n      ScheduleTimesReso\n      SensorModelCapacity\n      SensorModelMinThreshold\n      SensorModelSigmaFactor\n      StorageCheckInterval\n      StorageMinimum\n      USBCommand\n      UseWifi\n      VideoBitrate\n      VideoCaptureDuration\n      VideoCaptureFPS\n      VideoPlaybackFPS\n      VideoReso\n      VideoStillReso\n    }\n  }\n"]);return V=function(){return e},e}var N=_()(V()),G=_()(B(),N),z=_()(F(),N),H=_()(L()),W=_()(E(),H),Q=(_()(q(),H),_()(P(),H)),Y=_()(O(),H),J=_()(A(),H),Z=_()(T()),K=_()(U(),Z),X=_()(M(),Z),ee=_()($(),Z),te=_()(R()),ae=_()(j(),te),ie=_()(k()),ne=(_()(x(),ie),_()(I(),ie)),se=_()(C(),ie),re=_()(w()),oe=_()(D()),le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loc&&e.loc.lat?a("GmapMap",{staticStyle:{width:"100%",height:"300px"},attrs:{center:{lat:this.loc.lat,lng:this.loc.lon},zoom:Number(15),"map-type-id":"roadmap"}},[a("GmapMarker",{attrs:{position:{lat:this.loc.lat,lng:this.loc.lon}}})],1):a("div",{staticStyle:{width:"100%",height:"300px"}},[a("h2",{staticStyle:{"padding-top":"100px"}},[e._v("No location data yet")])])],1)},de=[],ce={name:"Gmap",props:{loc:{}}},ue=ce,ve=a("2877"),me=Object(ve["a"])(ue,le,de,!1,null,null,null);me.options.__file="Gmap.vue";var pe=me.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-spacer"),a("v-dialog",{attrs:{disabled:!e.data.hydrated,"max-width":"500px"},model:{value:e.data.dialog,callback:function(t){e.$set(e.data,"dialog",t)},expression:"data.dialog"}},[a("v-btn",{staticClass:"mb-2",attrs:{slot:"activator",disabled:!e.data.hydrated,color:"primary"},slot:"activator"},[e._v("New User")]),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{class:{"text--lighten-2":e.data.editedItem.emailReadOnly},attrs:{label:"Email",rules:[e.data.rules.required,e.data.rules.email],readonly:e.data.editedItem.emailReadOnly,"prepend-icon":e.data.editedItem.emailReadOnly?"lock":void 0,hint:"Enter the email address of the new user."},on:{input:function(t){return e.checkFormCompleted()}},model:{value:e.data.editedItem.email,callback:function(t){e.$set(e.data.editedItem,"email",t)},expression:"data.editedItem.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:e.data.userRoles,label:"Access level"},model:{value:e.data.editedItem.role,callback:function(t){e.$set(e.data.editedItem,"role",t)},expression:"data.editedItem.role"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"ascent darken-1",flat:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{disabled:!e.data.editedItem.canSave,color:"ascent darken-1",flat:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1),e.data.hydrated?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.data.headers,items:e.data.listDeviceUsers.items,"item-key":"email","hide-actions":"","must-sort":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{class:{success:e.newRecordClass(t.item.email),warning:t.item.deleting}},[a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.email))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.role))]),a("td",{staticClass:"text-xs-left"},[e._v("\n          "+e._s(e._f("tsToDate")(t.item.created))+"\n          "),t.item.creator?a("span",[e._v("by "+e._s(t.item.creator))]):e._e()]),a("td",{staticClass:"text-xs-center"},[a("v-icon",{staticClass:"fal",attrs:{color:"accent"},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("fa-times-circle")])],1)])]}}],null,!1,1961053162)},[a("template",{slot:"no-data"},[a("h2",[e._v("No users found")])])],2):e._e(),a("v-alert",{staticClass:"mx-4",attrs:{value:e.data.errorMsg,type:"warning"}},[e._v(e._s(e.data.errorMsg))])],1)},fe=[],ge=(a("ac6a"),a("20d6"),{name:"DeviceUsers",props:{devId:String},data:function(){return Object.assign({},be)},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.provider.defaultClient.hydrated();case 2:this.data.originalEmails=[];case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:{formTitle:function(){return-1===this.data.editedIndex?"Add User":"Edit User"}},watch:{dialog:function(e){e||this.close()}},methods:{checkFormCompleted:function(){var e=""!=this.data.editedItem.email,t=1==this.data.rules.email(this.data.editedItem.email);this.data.editedItem.canSave=e&&t},newRecordClass:function(e){return""!=e&&0!=this.data.originalEmails.length&&this.data.originalEmails.indexOf(e)<0},editItem:function(e){this.data.editedIndex=this.data.listDeviceUsers.items.indexOf(e),this.data.editedItem=Object.assign({},e),this.data.editedItem.emailReadOnly=!0,this.data.dialog=!0},deleteItem:function(e){var t=this.devId,a=e.email.toLowerCase();confirm("Remove user ".concat(a," ?"))&&(this.$set(e,"deleting",!0),this.$apollo.mutate({mutation:ee,variables:{email:a,device:t},update:function(e,a){var i=a.data.delDeviceUser,n=e.readQuery({query:K,variables:{device:t}}),s=i.items[0].email,r=n.listDeviceUsers.items.findIndex(function(e){return e.email==s});r<0||(n.listDeviceUsers.items.splice(r,1),e.writeQuery({query:K,variables:{device:t},data:n}))}}).then(function(){}).catch(function(e){console.log("delete.error"+t+" / "+a),console.error(e),alert("Could not remove ".concat(a,": ").concat(e.message))}))},close:function(){var e=this;this.data.dialog=!1,setTimeout(function(){e.data.editedItem=Object.assign({},e.data.defaultItem),e.data.editedIndex=-1},300)},save:function(){var e=this.devId,t=this.data.editedItem.email.toLowerCase(),a=this.data.editedItem.role;this.close(),this.$apollo.mutate({mutation:X,variables:{email:t,device:e,role:a},update:function(t,a){var i=a.data.putDeviceUser,n=t.readQuery({query:K,variables:{device:e}}),s=i.items[0].email,r=n.listDeviceUsers.items.findIndex(function(e){return e.email==s});r<0?n.listDeviceUsers.items.unshift(i.items[0]):n.listDeviceUsers.items[r]=i.items[0],t.writeQuery({query:K,variables:{device:e},data:n})}}).then(function(){console.log("mutate.then "+e)}).catch(function(e){console.log("mutate.error for ".concat(t)),console.error(e),alert("Could not save details for ".concat(t,": ").concat(e.message))})}},apollo:{data:{query:function(){return K},variables:function(){return{device:this.devId}},update:function(e){if(!e||!e.listDeviceUsers)return this.data.errorMsg="Cannot retrieve the list of users.",this.data.hydrated=!1,this.data;e.hydrated=!0,this.data.errorMsg="";var t=Object.assign(this.data,e);return 0==t.originalEmails.length&&(t.originalEmails=t.listDeviceUsers.items.map(function(e){return e.email})),t},result:function(e){e.errors&&e.errors.forEach(function(e){"403"==e.errorType&&(this.data.errorMsg="The list of users can be viewed by camera admins only.")},this)}}}}),be={data:{hydrated:!1,errorMsg:"",dialog:!1,originalEmails:[],editedIndex:-1,editedItem:{email:"",role:"user",canSave:!1,emailReadOnly:!1},defaultItem:{email:"",role:"user",canSave:!1,emailReadOnly:!1},userRoles:[{text:"User - view data, photos and videos",value:"user"},{text:"Admin - manage users and settings",value:"admin"}],headers:[{text:"Email",value:"email",align:"center",sortable:!0},{text:"Role",value:"speed",align:"left",sortable:!0},{text:"Created",value:"timestamp",align:"left",sortable:!0},{text:"",value:"name",align:"center"}],listDeviceUsers:{items:[{email:"Loading ..."}]},rules:{required:function(e){return!!e||"Required."},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Must be a valid e-mail."}}}},_e=ge,ye=Object(ve["a"])(_e,he,fe,!1,null,null,null);ye.options.__file="DeviceUsers.vue";var Se=ye.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.data.hydrated&&!e.data.error?a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",lg5:"","mb-3":""}},[a("device-setting",{attrs:{devId:this.devId,label:"Photo/video enabled",value:e.data.getDeviceInfo.config.Pause,isAdmin:e.data.isAdmin,"value-type":"boolInv",settingId:"Pause",description:"Record photo/video stream on important events."}}),a("device-setting",{attrs:{devId:this.devId,label:"Radar enabled",value:e.data.getDeviceInfo.config.EnableRadar,isAdmin:e.data.isAdmin,"value-type":"bool",settingId:"EnableRadar",description:"Turn the radar on/off."}}),a("device-setting",{attrs:{devId:this.devId,label:"Instant video upload",value:e.data.getDeviceInfo.config.EnableVideoUpload,isAdmin:e.data.isAdmin,"value-type":"bool",settingId:"EnableVideoUpload",description:"Immediately upload all videos. Leave it off to selectively download them later."}})],1),a("v-flex",{attrs:{xs12:"",lg5:"","offset-lg2":""}},[a("device-setting",{attrs:{devId:this.devId,label:"Min speed",value:e.data.getDeviceInfo.config.RadarMinSpeed,isAdmin:e.data.isAdmin,unit:"km/h",settingId:"RadarMinSpeed",inputMask:"###",description:"Vehicles moving slower than this speed will not be captured on video."}}),a("v-expansion-panel",{attrs:{inset:"",expand:""}},[a("v-expansion-panel-content",[a("p",{attrs:{slot:"header"},slot:"header"},[e._v("Radar control")]),a("device-setting",{attrs:{"value-type":"textarea",devId:this.devId,value:e.data.getDeviceInfo.config.USBCommand,isAdmin:e.data.isAdmin,settingId:"USBCommand",description:"E.g. set:SF=-32767 for demo mode or SF=1 to return to normal speed with fastest target. It takes up to a minute for the command to reach the radar. The field may contain the last lot of commands."}}),a("p",{staticClass:"mx-4"},[e._v("\n              Send custom commands to a\n              "),a("a",{attrs:{target:"_blank",href:"http://houston-radar.com/user-manuals/SS300UserManual-Release.pdf"}},[e._v("SS400")]),e._v(" or\n              "),a("a",{attrs:{target:"_blank",href:"http://houston-radar.com/user-manuals/DR600UserManual-Release.pdf"}},[e._v("DR600")]),e._v(" radar unit, one per line as you would in a terminal.\n            ")])],1)],1),a("v-expansion-panel",{attrs:{inset:"",expand:""}},[a("v-expansion-panel-content",[a("p",{attrs:{slot:"header"},slot:"header"},[e._v("View all settings")]),a("v-card",[a("v-card-text",[e._v("Advanced settings can be changed by admins only.\n                "),a("v-btn",{on:{click:function(t){e.data.showAdvanced=!e.data.showAdvanced}}},[e.data.showAdvanced?e._e():a("span",[e._v("View")]),e.data.showAdvanced?a("span",[e._v("Hide")]):e._e()])],1)],1)],1)],1)],1)],1),e.data.showAdvanced?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("kbd",{staticClass:"ma-2"},[e._v("\n          BleActivations\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleActivations))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleDelay\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleDelay))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleDeviceAddresses\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleDeviceAddresses))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleDuration\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleDuration))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleFlex\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleFlex))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleMaxFrequency\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleMaxFrequency))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleMinActivations\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleMinActivations))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleMinActivationsDuration\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleMinActivationsDuration))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          BleOn\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.BleOn))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamAspectRatio\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamAspectRatio))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamExposureMode\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamExposureMode))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamFocusMode\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamFocusMode))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamFormat\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamFormat))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamMode\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamMode))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamRepeatCount\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamRepeatCount))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamRepeatFPS\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamRepeatFPS))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamRepeatLocked\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamRepeatLocked))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          CamReso\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.CamReso))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          DisableVideoUpload\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.DisableVideoUpload))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          DisplayDuration\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.DisplayDuration))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          DCRawArgs\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.DCRawArgs))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          EnableDataUpload\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.EnableDataUpload))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          EnableRadar\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.EnableRadar))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ImageCropRegion\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ImageCropRegion))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          JPEGQuality\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.JPEGQuality))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          LocationUpdateInterval\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.LocationUpdateInterval))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          NumberPlateMinConfidence\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.NumberPlateMinConfidence))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          Pause\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.Pause))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          RadarMaxFrequency\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.RadarMaxFrequency))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          RadarMinSpeed\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.RadarMinSpeed))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          RadioAlwaysOn\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.RadioAlwaysOn))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          RetryUploadForTypes\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.RetryUploadForTypes))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleInterval\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleInterval))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleReso\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleReso))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleFrom\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleFrom))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleTo\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleTo))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleTimes\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleTimes))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          ScheduleTimesReso\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.ScheduleTimesReso))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          SensorModelCapacity\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.SensorModelCapacity))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          SensorModelMinThreshold\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.SensorModelMinThreshold))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          SensorModelSigmaFactor\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.SensorModelSigmaFactor))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          StorageCheckInterval\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.StorageCheckInterval))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          StorageMinimum\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.StorageMinimum))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          UseWifi\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.UseWifi))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoBitrate\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoBitrate))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoCaptureDuration\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoCaptureDuration))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoCaptureFPS\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoCaptureFPS))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoPlaybackFPS\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoPlaybackFPS))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoReso\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoReso))])]),a("kbd",{staticClass:"ma-2"},[e._v("\n          VideoStillReso\n          "),a("code",[e._v(e._s(e.data.getDeviceInfo.config.VideoStillReso))])])])],1):e._e()],1):e._e(),a("v-alert",{attrs:{value:e.data.error,type:"error"}},[e._v("Settings control is not available for this device.")])],1)},we=[],Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",{attrs:{inset:"",expand:""},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}},[a("v-expansion-panel-content",["boolInv"==this.valueType?a("v-switch",{attrs:{slot:"header",color:"toggleOn","true-value":"0","false-value":"1",label:this.label,disabled:!e.hasValue||!e.isAdmin},on:{click:function(t){t.stopPropagation(),e.expand=[!0]}},slot:"header",model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}}):"bool"==this.valueType?a("v-switch",{attrs:{slot:"header",color:"toggleOn","true-value":"1","false-value":"0",label:this.label,disabled:!e.hasValue||!e.isAdmin},on:{click:function(t){t.stopPropagation(),e.expand=[!0]}},slot:"header",model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}}):"list"==this.valueType?a("v-select",{attrs:{slot:"header",color:"primary","text-color":"white",items:this.values,label:this.label,disabled:!e.hasValue||!e.isAdmin},on:{click:function(t){t.stopPropagation(),e.expand=[!0]}},slot:"header",model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}}):"textarea"==this.valueType?a("v-textarea",{attrs:{slot:"header","auto-grow":"",rows:"1",label:this.label,suffix:this.unit,mask:e.inputMask,disabled:!e.hasValue||!e.isAdmin},on:{click:function(t){t.stopPropagation(),e.expand=[!0]}},slot:"header",model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}}):a("v-text-field",{attrs:{slot:"header",label:this.label,suffix:this.unit,mask:e.inputMask,disabled:!e.hasValue||!e.isAdmin},on:{click:function(t){t.stopPropagation(),e.expand=[!0]}},slot:"header",model:{value:e.select.value,callback:function(t){e.$set(e.select,"value",t)},expression:"select.value"}}),a("v-card",[a("v-card-text",[e._v("\n        "+e._s(this.description)+"\n        "),a("v-alert",{attrs:{value:e.error,type:"error"}},[e._v("Could not save this setting. Try again?")]),a("v-alert",{attrs:{value:!e.hasValue,type:"info"}},[e._v("Not supported on this device.")])],1),e.canSave?a("v-card-actions",[a("v-spacer"),e.saving?a("v-progress-circular",{staticClass:"ml-2",attrs:{indeterminate:e.saving,value:0,size:"24"}}):e._e(),a("v-btn",{attrs:{flat:"",color:"error",disabled:e.saving},on:{click:function(t){return e.cancel()}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"error",disabled:e.saving},on:{click:function(t){return e.save()}}},[e._v("Save")])],1):e._e()],1)],1)],1)},Ie=[],xe=(a("6b54"),{name:"DeviceSetting",props:{label:String,value:String,values:Array,valueType:String,unit:String,description:String,settingId:String,devId:String,inputMask:String,isAdmin:Boolean},data:function(){var e=this.value?this.value:"";return{error:!1,saving:!1,expand:[!1],select:{text:e.toString(),value:e.toString()},newValue:e.toString(),hasValue:e&&""!=e.toString()}},watch:{value:function(e,t){var a=e||"";this.error=!1,this.saving=!1,this.expand=[!1],this.select={text:a.toString(),value:a.toString()},this.newValue=a.toString(),this.hasValue=a&&""!=a.toString()}},computed:{canSave:function(){var e=this.newValue!=this.select.value.toString();return e}},methods:{cancel:function(){this.select.value=this.value.toString(),this.expand=[!1],this.error=!1},save:function(){var e=this.devId,t=this.settingId,a=this.select.value,i=this;this.saving=!0,this.error=!1,this.$apollo.mutate({mutation:z,variables:{device:e,setting:t,value:a},update:function(e,a){var n=a.data.putDeviceConfig,s=n.config[t].toString();i.select.value=s,i.newValue=s}}).then(function(){i.saving=!1,setTimeout(function(){i.expand=[!1]},1e3)}).catch(function(e){i.saving=!1,i.error=!0,console.log("mutate.error for ".concat(t)),console.error(e)})}}}),ke=xe,je=Object(ve["a"])(ke,Ce,Ie,!1,null,null,null);je.options.__file="DeviceSetting.vue";var Re=je.exports,$e={name:"DeviceSettings",props:{devId:String},components:{DeviceSetting:Re},data:function(){return Object.assign({},Me)},beforeCreate:function(){this.$store.commit("setHasRadar",!1)},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.provider.defaultClient.hydrated();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),apollo:{data:{query:function(){return G},variables:function(){return{device:this.devId}},update:function(e){this.data.isAdmin=!1,this.$store.commit("setHasRadarDevId",this.devId),e.getDeviceInfo&&e.getDeviceInfo.config?(e.hydrated=!0,e.error=!1,e.getDeviceInfo.config.EnableRadar?(this.$store.commit("setHasRadar",!0),this.$store.commit("setRadarMinSpeed",e.getDeviceInfo.config.RadarMinSpeed)):(this.$store.commit("setHasRadar",!1),this.$store.commit("setRadarMinSpeed","")),"admin"==e.getDeviceInfo.user.role&&(this.data.isAdmin=!0)):e.error=!0;var t=Object.assign(this.data,e);return t}}}},Me={data:{hydrated:!1,error:!1,getDeviceInfo:{},showAdvanced:!1,isAdmin:!1,rules:{required:function(e){return!!e||"Required."},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)||"Must be a valid e-mail."}}}},Ue=$e,Te=Object(ve["a"])(Ue,De,we,!1,null,null,null);Te.options.__file="DeviceSettings.vue";var Ae=Te.exports,Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showImg&&this.state?a("router-link",{attrs:{to:{name:"device",params:{devId:this.state.items[0].device}}}},[e.hydrated?a("v-img",{attrs:{src:"https://"+e.mediaBaseDomain+"/"+this.state.items[0].device+"/resized/fhd/"+this.state.media.name+".jpg","lazy-src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mOcWQ8AAbcBGqb119EAAAAASUVORK5CYII=",height:"300",width:"100%"},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":"","ma-0":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"blue-grey"}})],1)]},proxy:!0}],null,!1,3615721037)}):e._e()],1):e._e()},Pe=[],qe={name:"DeviceImg",props:{state:Object,showImg:Boolean},computed:{hydrated:function(){return null!=this.state.media},mediaBaseDomain:function(){return o.mediaBaseDomain}}},Ee=qe,Le=Object(ve["a"])(Ee,Oe,Pe,!1,null,null,null);Le.options.__file="DeviceImg.vue";var Fe=Le.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{"fill-height":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",lg4:""}},[a("v-card",{attrs:{elevation:"0"}},[a("v-card-title",[a("h4",[e._v("Environment")])]),a("v-divider"),a("v-list",{attrs:{dense:""}},[a("v-list-tile",[a("v-list-tile-content",[e._v("Last contact:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(e._f("tsToTimeDate")(this.item.timestamp)))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Voltage:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.volt))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Temp:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.temp))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Free memory:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.mem))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Firmware:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.version))])],1)],1)],1)],1),a("v-flex",{attrs:{xs12:"",lg4:""}},[a("v-card",{attrs:{elevation:"0"}},[a("v-card-title",[a("h4",[e._v("Cellular")])]),a("v-divider"),this.item.cell?a("v-list",{attrs:{dense:""}},[a("v-list-tile",[a("v-list-tile-content",[e._v("Operator:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.operator))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Type:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.type))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Signal:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.signal)+" dB")])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("State:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.state))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Cells:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.cells))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("ASU:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.asu))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("PCI:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.pci))])],1)],1):a("p",[e._v("No cellular data was provided in the latest report.")])],1)],1),a("v-flex",{attrs:{xs12:"",lg4:""}},[a("v-card",{attrs:{elevation:"0"}},[a("v-card-title",[a("h4",[e._v("Location")])]),a("v-divider"),this.item.loc?a("v-list",{attrs:{dense:""}},[a("v-list-tile",[a("v-list-tile-content",[e._v("Latitude:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.loc.lat))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Longitude:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.loc.lon))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Altitude:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(this.item.cell.altitude))])],1),a("v-list-tile",[a("v-list-tile-content",[e._v("Accuracy:")]),a("v-list-tile-content",{staticClass:"align-end"},[e._v("n/a")])],1)],1):a("p",[e._v("No location data was provided in the latest report.")])],1)],1)],1)],1)},Ve=[],Ne={name:"DeviceState",props:{state:Object},computed:{hydrated:function(){return null!=this.state.device},item:function(){return this.state.items[0]},volt:function(){try{var e=Number.parseInt(this.state.items[0].volt);if(e>0)return(e/1e3).toString()+" v"}catch(e){return"n/a"}},temp:function(){try{var e=Number.parseInt(this.state.items[0].temp);if(e>0)return(e/10).toString()+" ÂºC"}catch(e){return"n/a"}},mem:function(){try{var e=Number.parseInt(this.state.items[0].mem);if(e>0)return(e/1073741824).toString().substring(0,5)+" GB"}catch(e){return"n/a"}}}},Ge=Ne,ze=Object(ve["a"])(Ge,Be,Ve,!1,null,null,null);ze.options.__file="DeviceState.vue";var He=ze.exports,We={name:"DeviceInfo",props:{devId:String,showTabs:Boolean,showPanel:Boolean},components:{Gmap:pe,DeviceUsers:Se,DeviceSettings:Ae,DeviceImg:Fe,DeviceState:He},methods:{voltIcon:function(){try{var e=Number.parseInt(this.data.getLatestDeviceState.items[0].volt);return e>4100?"full":e>4e3?"three-quarters":e>3900?"half":e>3800?"quarter":"empty"}catch(e){return"slash"}},tempIcon:function(){try{var e=Number.parseInt(this.data.getLatestDeviceState.items[0].temp);return e>400?"full":e>300?"three-quarters":e>200?"half":e>0?"quarter":"empty"}catch(e){return"empty"}},cellIcon:function(){try{var e=Number.parseInt(this.data.getLatestDeviceState.items[0].cell.signal);return e<-118?"alt-1":e<-110?"1":e<-105?"2":e<-100?"3":"4"}catch(e){return"alt-slash"}},cellType:function(){try{var e=String(this.data.getLatestDeviceState.items[0].cell.type);return e.toLowerCase().includes("lte")?"4G":"3G"}catch(e){return"3G"}},voltUnit:function(){var e=String(this.data.getLatestDeviceState.items[0].volt);return e.substring(0,1)+"."+e.substring(1,2)+"v"}},computed:{devIdComputed:function(){return this.devId?this.devId:this.$route.params.devId?this.$route.params.devId:void 0}},data:function(){return Object.assign({},Qe)},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.provider.defaultClient.hydrated();case 2:this.hydrated=!0;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),apollo:{data:{query:function(){return W},fetchPolicy:"cache-and-network",variables:function(){return this.devId?{device:this.devId}:this.$route.params.devId?{device:this.$route.params.devId}:void this.$route.push("home")},update:function(e){if(!e.getLatestDeviceState||0==e.getLatestDeviceState.items.length)return this.data.error=!0,this.data;e.hydrated=!!e.getLatestDeviceState,e.error=!e.hydrated;var t=Object.assign({},this.data,e);return t}}}},Qe={data:{hydrated:!1,fetchPolicy:"cache-and-network",error:!1,showImg:!1,getLatestDeviceState:{items:[{device:"Loading ..."}]}}},Ye=We,Je=Object(ve["a"])(Ye,y,S,!1,null,null,null);Je.options.__file="DeviceInfo.vue";var Ze=Je.exports;function Ke(){var e=Object(g["a"])(["\n  {\n    listUserDevices {\n      items {\n        device\n      }\n    }\n  }\n"]);return Ke=function(){return e},e}var Xe=_()(Ke()),et={name:"UserDevices",components:{DeviceInfo:Ze},data:function(){return{data:{listUserDevices:{items:[]}}}},apollo:{data:{query:function(){return Xe},fetchPolicy:"cache-and-network",update:function(e){return e}}}},tt=et,at=Object(ve["a"])(tt,h,f,!1,null,null,null);at.options.__file="UserDevices.vue";var it=at.exports,nt={name:"home",components:{UserDevices:it}},st=nt,rt=Object(ve["a"])(st,m,p,!1,null,null,null);rt.options.__file="vHome.vue";var ot=rt.exports,lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",[i("v-layout",{attrs:{row:""}},[i("v-flex",[i("h1",[e._v("Sensorable ALPR Radar Demo Page")]),i("h3",[e._v("Display speed and number plates on a VMS or LED board in real time")]),i("v-card",{staticClass:"mt-5"},[i("video",{attrs:{controls:"",preload:"auto",src:"https://cdn.sensorable.io/radar/alpr-demo-20180913-sbr.mp4",poster:a("a75c"),width:"100%",height:"auto"}}),i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md6:""}},[i("v-list",{attrs:{"three-line":""}},e._l(e.items,function(t){return i("div",{key:t.title},[i("v-divider",{attrs:{inset:""}}),i("v-list-tile",[i("v-list-tile-avatar",[i("v-icon",{staticClass:"mt-3"},[e._v(e._s(t.icon))])],1),i("v-list-tile-content",[i("div",[e._v(e._s(t.title))])])],1)],1)}),0)],1),i("v-flex",{attrs:{xs12:"",md6:""}},[i("blockquote",{staticClass:"blockquote mb-5 text-md-left"},[i("p",[e._v("Our radar reads number plates and displays them with the speed on an LED board up to 100m away to remind the\n                  speeding drivers to slow down.")]),i("p",[e._v("All the speed data, number plates and videos are uploaded to a live dashboard over a mobile connection.")])])])],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-btn",{attrs:{color:"orange",href:"mailto:info@sensorable.io"}},[i("v-icon",{staticClass:"mr-2"},[e._v("call")]),e._v(" More info")],1)],1),i("v-flex",{attrs:{xs12:"",sm6:""}},[i("v-btn",{attrs:{color:"orange",to:"/radar-view"}},[i("v-icon",{staticClass:"mr-2"},[e._v("directions_car")]),e._v(" View live demo")],1)],1)],1)],1)],1)],1)],1)],1)},dt=[],ct={name:"home-public",data:function(){return{items:[{icon:"sms",title:"Instant number plate capture"},{icon:"dvr",title:"Wireless connection to a VMS / LED board"},{icon:"battery_std",title:"Battery powered"},{icon:"signal_cellular_alt",title:"Live dashboard over cellular network"}]}},methods:{mailto:function(){this.window.location.href="mailto:info@sensorable.io"}}},ut=ct,vt=Object(ve["a"])(ut,lt,dt,!1,null,null,null);vt.options.__file="vHomePublic.vue";var mt,pt,ht=vt.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("DeviceInfo",{key:e.devId,attrs:{devId:e.devId,showTabs:!0}}),e.$store.state.hasRadar&&e.$store.state.hasRadarDevId==e.devIdComputed&&!e.plateComputed?a("SpeedChart",{key:e.devId,attrs:{devId:e.devIdComputed}}):e._e(),e.$store.state.hasRadar&&e.$store.state.hasRadarDevId==e.devIdComputed?a("SpeedTable",{key:e.devId,attrs:{devId:e.devIdComputed}}):e._e(),e.$store.state.hasRadar&&e.$store.state.hasRadarDevId==e.devIdComputed?a("MediaForSpeed",{key:e.devId,attrs:{devId:e.devId}}):e._e(),e.$store.state.hasRadar||e.$store.state.hasRadarDevId!=e.devIdComputed?e._e():a("MediaForStills",{key:e.devId,attrs:{devId:e.devId}})],1)],1)],1)},gt=[],bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.listMediaUploads&&e.listMediaUploads.items?a("div",[a("media-dialog",{attrs:{"dev-id":e.devIdComputed,dialog:e.data.dialog}}),a("v-container",{attrs:{"grid-list-lg":"",fluid:"","justify-space-between":"","pl-0":"","pr-0":""}},[a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.listMediaUploads.items,function(t,i){return a("v-flex",{key:t.timestamp,class:{displaynone:i>=e.data.maxItems},attrs:{md3:"",sm6:"",xs12:""}},[a("v-img",{staticClass:"clickable",attrs:{src:"https://"+e.mediaBaseDomain+"/"+e.devIdComputed+"/resized/thumb/"+t.name+".jpg",width:"100%"},on:{click:function(a){return a.stopPropagation(),e.openMediaDialog(t.timestamp)}}},[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":""}},[a("v-layout",{attrs:{"align-end":"","justify-start":"",row:"","fill-height":"","ma-0":""}},[a("v-flex",{attrs:{xs3:"","align-start":"",flexbox:"","pa-0":""}},[a("v-chip",{staticClass:"ma-0 clickable",attrs:{small:"",label:"",color:e.eventColor(t.eventTimestamp)}},[e._v("\n                  "+e._s(e._f("tsToTimeDate")(t.timestamp))+"\n                  "),e.isVideoThumb(t.eventTimestamp)?a("v-icon",{staticClass:"ml-2 fal clickable",attrs:{color:"white"}},[e._v("fa-film")]):a("v-icon",{staticClass:"ml-2 clickable",attrs:{color:"white"}},[e._v("photo")]),t.speed?a("span",{staticClass:"ml-2 white--text"},[e._v(e._s(t.speed)+"km/h")]):e._e()],1)],1)],1)],1)],1)],1)}),1),e.data.maxItems<e.data.imgCount?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{color:"info"},on:{click:function(t){e.data.maxItems+=20}}},[e._v("Load more ...")])],1)],1):e._e()],1)],1):e._e()},_t=[],yt=(a("ac4d"),a("8a81"),a("b9b9")),St=a.n(yt),Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-transition",scrollable:"",fullscreen:e.$vuetify.breakpoint.smAndDown,width:"600","max-width":"600"},model:{value:e.dialogState,callback:function(t){e.dialogState=t},expression:"dialogState"}},[a("v-card",[a("v-card-title",{staticClass:"pa-0 ma-0"},[e.vidUrl||e.mediaUploadItem.fileReqUtc?e._e():a("v-btn",{staticClass:"white--text ml-3",attrs:{small:"",disabled:e.downloadDisabled,color:"blue-grey"},on:{click:function(t){return e.mediaRequest()}}},[e._v("\n        Download video\n        "),a("v-icon",{staticClass:"fal",attrs:{size:"12",right:"",dark:""}},[e._v("fa-download")])],1),a("v-spacer"),a("v-btn",{attrs:{flat:"",icon:"",color:"blue-grey"},on:{click:function(t){return t.stopPropagation(),e.closeDialog()}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",{staticClass:"pt-0"},[e.vidUrl&&""!=e.vidUrl?a("video",{ref:"dialogVideo",attrs:{controls:"",preload:"auto",muted:"",src:"https://"+e.mediaBaseDomain+"/full/"+e.devId+"/"+e.vidUrl+".mp4",width:"100%",height:"auto"},domProps:{muted:!0},on:{canplay:e.updatePlaybackSpeed}}):e.mediaUploadItem.name?a("v-img",{staticClass:"clickable",attrs:{src:"https://"+e.mediaBaseDomain+"/"+e.devId+"/resized/fhd/"+e.mediaUploadItem.name+".jpg",width:"100%"},on:{click:function(t){return e.openImageInNewWindow("https://"+e.mediaBaseDomain+"/"+e.devId+"/resized/fhd/"+e.mediaUploadItem.name+".jpg")}}},[e.mediaUploadItem.fileReqUtc&&e.fileRequestedAlert||e.downloadError?a("v-container",{attrs:{"fill-height":""}},[a("v-layout",{attrs:{"fill-height":""}},[a("v-flex",{attrs:{xs12:"","align-end":"",flexbox:""}},[a("v-alert",{attrs:{value:e.downloadError,type:"error"}},[e._v("Something went wrong with the download request. Try refreshing the entire page and requesting again.")]),a("v-alert",{attrs:{value:e.fileRequestedAlert,type:"info"},on:{click:function(t){t.stopPropagation(),e.fileRequestedAlert=!1}}},[a("h3",{staticClass:"headline"},[e._v("Video file requested")]),a("div",[a("p",[e._v("It may take between a few seconds and a few minutes to download the video from the camera. You can request videos for other cars while you wait.")]),a("p",[e._v("Videos are downloaded over a cellular network and may incur additional cost.")]),a("p",[a("strong",[e._v("Time requested")]),e._v("\n                    : "+e._s(e.lastRequestMsg())+"\n                  ")])]),a("v-spacer"),e.allowReDownload?a("v-btn",{staticClass:"white--text ml-3",attrs:{small:"",color:"blue-grey"},on:{click:function(t){return e.mediaRequest()}}},[e._v("\n                  Re-request video\n                  "),a("v-icon",{staticClass:"fal",attrs:{size:"12",right:"",dark:""}},[e._v("fa-download")])],1):e._e(),a("v-btn",{staticClass:"white--text ml-3",attrs:{small:"",right:"",color:"blue-grey"},on:{click:function(t){e.fileRequestedAlert=!1}}},[e._v("Dismiss")])],1)],1)],1)],1):e._e()],1):e._e()],1),a("v-card-actions",[a("v-container",{staticClass:"pa-0 ma-0"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"pa-1 text-xs-center",attrs:{xs12:"",sm4:""}},[e.mediaUploadItem.speed>0?a("h3",{staticClass:"headline mb-0 text-xs-center dialog-plate"},[e.mediaUploadItem.plate?a("span",[a("router-link",{attrs:{to:{name:"device-plate",params:{devId:e.devId,plate:e.mediaUploadItem.plate}}}},[a("span",[e._v(e._s(e.mediaUploadItem.plate))])])],1):e._e()]):e._e(),a("span",{staticClass:"mx-2 grey--text caption"},[e._v(e._s(e._f("tsToTimeDate")(e.mediaUploadItem.name)))])]),a("v-flex",{staticClass:"pa-1",attrs:{xs12:"",sm8:""}},[a("p",{staticClass:"ma-0 pa-0 text-xs-center grey--text"},[e._v("Speed, km/h")]),a("acceleration-chart",{attrs:{devId:e.devId,timestampFrom:e.tsFrom,timestampTo:e.tsTo}})],1)],1)],1)],1)],1)],1)},wt=[],Ct=(a("4917"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.hydratedGraph?a("speed-chart-line",{attrs:{chartData:e.data.chartData,options:e.data.chartOptions,height:100,width:150}}):a("v-progress-linear",{staticClass:"my-0 py-0",attrs:{height:"2",indeterminate:"",color:"blue-grey"}})}),It=[],xt=a("1fca"),kt={name:"SpeedChartLine",extends:xt["b"],mixins:[xt["c"].reactiveProp],props:["chartData","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},jt=kt,Rt=Object(ve["a"])(jt,mt,pt,!1,null,null,null);Rt.options.__file="SpeedChartLine.vue";var $t=Rt.exports,Mt=a("a9be"),Ut=a.n(Mt),Tt={name:"AccelerationChart",components:{SpeedChartLine:$t,ChartJsPluginDataLabels:Ut.a},props:{devId:String,timestampFrom:String,timestampTo:String},data:function(){return{hydratedGraph:!1}},methods:{},apollo:{data:{query:function(){return ae},variables:function(){return this.hydratedGraph=!1,{device:this.devId,timestampFrom:this.timestampFrom,timestampTo:this.timestampTo}},skip:function(){if(this.hydratedGraph=!1,!this.timestampFrom||!this.timestampTo)return!0},update:function(e){var t={chartOptions:At,chartData:{labels:e.listDeviceSpeed.items.map(function(e){return"speed at "+e.timestamp.slice(11,23)}),datasets:[{data:e.listDeviceSpeed.items.map(function(e){return e.speed})}]}};return this.hydratedGraph=!0,t},result:function(){}}}},At={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1},elements:{line:{fill:!1,borderColor:"#283593",borderWidth:2},point:{pointStyle:"circle",backgroundColor:"#283593",pointRadius:5}},scales:{yAxes:[{display:!1,ticks:{maxTicksLimit:3},gridLines:{display:!0}}],xAxes:[{display:!1,ticks:{maxTicksLimit:3},gridLines:{display:!0}}]},layout:{padding:{left:15,right:15,top:10,bottom:20}},plugins:{datalabels:{color:"#ffffff",font:{weight:"bold"},backgroundColor:"#283593",borderRadius:5}}},Ot=Tt,Pt=Object(ve["a"])(Ot,Ct,It,!1,null,null,null);Pt.options.__file="AccelerationChart.vue";var qt=Pt.exports,Et=a("c1df"),Lt={name:"MediaDialog",components:{AccelerationChart:qt},data:function(){return{fileRequestedAlert:!0,downloadDisabled:!1,downloadError:!1}},props:{devId:String},computed:{itemTimestamp:function(){return this.downloadDisabled=!1,this.$route.query.vid},mediaBaseDomain:function(){return o.mediaBaseDomain},mediaUploadItem:function(){if(!this.itemTimestamp)return{};if(!this.$store.state.dbMediaUploadsWithSpeed.items)return{};var e={};this.$store.state.dbMediaUploadsWithSpeed.items.some(function(t){if(t.timestamp==this.itemTimestamp)return e=t,!0},this);return e},dialogState:{get:function(){return!(!this.itemTimestamp||!this.mediaUploadItem.name)},set:function(){}},tsFrom:function(){if(!this.mediaUploadItem.name)return"";var e=this.mediaUploadItem.name.split("_")[0];return e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,11)+":"+e.slice(11,13)+":"+e.slice(13,15)},tsTo:function(){if(!this.mediaUploadItem.name)return"";var e=this.mediaUploadItem.name.split("_")[1];return e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,11)+":"+e.slice(11,13)+":"+e.slice(13,15)},allowReDownload:function(){if(Et["utc"]()>Et["utc"](this.mediaUploadItem.fileReqUtc).add(3,"minutes"))return!0},vidUrl:function(){if(this.mediaUploadItem.type&&this.mediaUploadItem.type.includes("mp4"))return this.mediaUploadItem.name}},methods:{openImageInNewWindow:function(e){this.fileRequestedAlert&&this.mediaUploadItem.fileReqUtc||window.open(e,"_blank")},lastRequestMsg:function(){var e=Et["utc"](),t=Et["utc"](this.mediaUploadItem.fileReqUtc),a=e.diff(t,"seconds");return a<20?"just now":a<70?"a minute ago":a<600?Math.floor(a/60)+" minutes ago":t.local().format("HH:mm, DD MMM YYYY")},mediaRequest:function(){var e=this;this.downloadDisabled=!0;var t=this.devId,a=this.mediaUploadItem.name+".mp4";this.$apollo.mutate({mutation:oe,variables:{device:t,filename:a},update:function(t,a){var i=a.data.reqMediaDownload;if(!i)return e.fileRequestedAlert=!1,void(e.downloadError=!0);e.$store.commit("setLastMediaUploadsReqTsUtc",i),e.fileRequestedAlert=!0,e.mediaUploadItem.fileReqUtc=i}}).then(function(){}).catch(function(t){console.log("mutate.error for ".concat(a)),console.error(t),e.fileRequestedAlert=!1,e.downloadError=!0})},updatePlaybackSpeed:function(){var e=this.vidUrl.match(/_fps(\d+)_/),t=e.length>1?e[1]/30:.1,a=this.$refs.dialogVideo;a&&(a.playbackRate=t)},closeDialog:function(){var e=Object.assign({},this.$route.query);e.vid&&(delete e.vid,this.$router.replace({query:e}))}}},Ft=Lt,Bt=Object(ve["a"])(Ft,Dt,wt,!1,null,null,null);Bt.options.__file="MediaDialog.vue";var Vt=Bt.exports,Nt={name:"MediaForSpeed",components:{MediaDialog:Vt},props:{devId:String},data:function(){return{data:{currentDateRange:"",imgCount:-1,dialog:0,maxItems:12}}},computed:{devIdComputed:function(){return this.devId?this.devId:this.$route.params.devId?this.$route.params.devId:void 0},mediaBaseDomain:function(){return o.mediaBaseDomain},galleryLoadingClass:function(){if(!this.$apollo.loading)return"invisible"},listMediaUploads:function(){var e=0;return this.$store.state.dbMediaUploadsWithSpeed.items&&(e=this.$store.state.dbMediaUploadsWithSpeed.items.length),this.data.imgCount=e,this.$store.state.dbMediaUploadsWithSpeed}},methods:{eventColor:function(e){return e?(this.data.eventsPresent=!0,"rgba(255,50,50,0.6)"):"rgba(255,255,255,0.6)"},isVideoThumb:function(e){var t=!0,a=!1,i=void 0;try{for(var n,s=this.listMediaUploads.items[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var r=n.value;if((r.timestamp==e||r.eventTimestamp==e)&&r.type.includes("mp4"))return!0}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}return!1},openMediaDialog:function(e){var t=Object.assign({},this.$route.query);t.vid=e,this.$router.replace({query:t})}}},Gt=Nt,zt=Object(ve["a"])(Gt,bt,_t,!1,null,null,null);zt.options.__file="MediaForSpeed.vue";var Ht=zt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("media-dialog",{attrs:{"dev-id":e.devIdComputed,dialog:e.dialog}}),e.hydrated?a("v-card",[a("v-card-title",[a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",{staticClass:"pa-0",attrs:{xs1:"",md6:""}},[a("v-spacer")],1),a("v-flex",{staticClass:"pa-0",attrs:{xs10:"",md5:""}},[a("v-text-field",{attrs:{label:"Plate search","single-line":"","hide-details":"",clearable:"",mask:"NNNNNNNN"},on:{"click:clear":function(t){return e.searchByPlateCancel()},change:function(t){return e.searchByPlateChange()}},model:{value:e.plateSearch,callback:function(t){e.plateSearch=t},expression:"plateSearch"}})],1),a("v-flex",{staticClass:"pa-0",attrs:{xs1:""}},[a("v-btn",{attrs:{icon:"",disabled:this.plateSearch&&this.plateSearch==this.plateComputed},on:{click:function(t){return e.searchByPlate()}}},[a("v-icon",{staticClass:"fal"},[e._v("fa-search")])],1)],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersComputed,items:e.filteredlistMediaUploadsWithSpeedItems,"disable-initial-sort":"","item-key":"name","rows-per-page-items":[10,50,{text:"All",value:-1}],loading:e.loadingColor},scopedSlots:e._u([{key:"items",fn:function(t){return t.item.speed>0&&t.item.type.includes("jpg")?[a("tr",{staticClass:"speed-row"},[a("td",{staticClass:"text-xs-center pa-0"},[e._v(e._s(e._f("tsToMMMDDHHmm")(t.item.timestamp)))]),a("td",{staticClass:"text-xs-center pa-0"},[e._v(e._s(t.item.speed)+"km/h")]),a("td",{staticClass:"text-xs-center pa-0",class:{npbg:t.item.name.includes("_bb")}},[e._v("\n            "+e._s(t.item.plate)+"\n            "),t.item.name.includes("_bb")?a("div",[a("a",{attrs:{href:"https://"+e.mediaBaseDomain+"/np/"+e.devIdComputed+"/"+t.item.name+".jpg",target:"_blank",title:"View the plate"}},[a("img",{staticClass:"plate",attrs:{src:"https://"+e.mediaBaseDomain+"/np/"+e.devIdComputed+"/"+t.item.name+".jpg"}})])]):e._e()]),a("td",{staticClass:"text-xs-center clickable pa-0",on:{click:function(a){return a.stopPropagation(),e.openMediaDialog(t.item.timestamp)}}},[e.isVideoThumb(t.item.eventTimestamp)?a("v-icon",{staticClass:"ml-2 fal clickable accent--text"},[e._v("fa-film")]):t.item.fileReqUtc?a("v-icon",{staticClass:"ml-2 fal clickable",attrs:{color:"blue-grey"}},[e._v("fa-download")]):a("v-icon",{staticClass:"ml-2 clickable accent--text"},[e._v("photo")]),t.item.plate&&!e.plateComputed?a("router-link",{attrs:{to:{name:"device-plate",params:{devId:e.devIdComputed,plate:t.item.plate}}}},[a("v-icon",{staticClass:"ml-2 mb-1 fal clickable accent--text",attrs:{small:""}},[e._v("fa-filter")])],1):a("v-icon",{staticClass:"ml-2 fal clickable invisible",attrs:{small:""}},[e._v("fa-filter")])],1)])]:void 0}}],null,!0)},[a("template",{slot:"no-data"},[a("v-alert",{attrs:{value:e.hydrated&&!e.$apollo.loading,type:"warning"}},[this.plateComputed?a("span",[e._v("\n            There is no data for plate\n            "),a("strong",[e._v(e._s(e.plateComputed))]),e._v(".\n          ")]):a("span",[e._v("This date has only speed data. Other dates may have photo and video media.")])])],1)],2)],1):e._e()],1)},Qt=[],Yt=(a("55dd"),5e3),Jt=3e4,Zt={search:"",headers:[{text:"Date/time",value:"timestamp",align:"center",sortable:!0,class:"pa-0"},{text:"Speed",value:"speed",align:"center",sortable:!0,class:"pa-0"},{text:"Plate",value:"plate",align:"center",sortable:!0,class:"pa-0"},{text:"",value:"name",align:"center",class:"pa-0"}]},Kt={name:"SpeedTable",props:{devId:String},components:{MediaDialog:Vt},beforeDestroy:function(){this.apolloPollingTimer&&clearInterval(this.apolloPollingTimer)},data:function(){return{hydrated:!1,dialog:0,plateSearch:"",apolloStopPollingAt:null,apolloPollingTimer:""}},watch:{mediaRequestTs:function(){this.apolloStopPollingAt=Et().add(Jt/1e3,"seconds"),this.apolloPollingTimer&&clearInterval(this.apolloPollingTimer),this.apolloPollingTimer=setInterval(this.checkPollingStatus,Jt),this.plateSearch?this.$apollo.queries.dataByPlate.startPolling(Yt):this.$apollo.queries.data.startPolling(Yt)}},computed:{videoDialogWidth:function(){switch(this.$vuetify.breakpoint.name){case"xs":return"100%";case"sm":return"100%";case"md":return"100%"}return"800px"},devIdComputed:function(){return this.devId?this.devId:this.$route.params.devId?this.$route.params.devId:void 0},mediaBaseDomain:function(){return o.mediaBaseDomain},plateComputed:function(){if(this.$route.params.plate){var e=this.$route.params.plate.toUpperCase();return this.plateSearch=e,e}},listMediaUploads:function(){return this.data?this.data.listMediaUploadsWithSpeed:this.dataByPlate.listMediaUploadsByPlate},headersComputed:function(){return this.data?this.data.headers:this.dataByPlate.headers},filteredlistMediaUploadsWithSpeedItems:function(){return this.listMediaUploads.items.filter(function(e){return e.type.includes("jpg")})},loadingColor:function(){return!!this.$apollo.loading&&"accent"},mediaRequestTs:function(){return this.$store.state.lastMediaUploadsReqTsUtc}},methods:{isVideoThumb:function(e){var t=!0,a=!1,i=void 0;try{for(var n,s=this.listMediaUploads.items[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var r=n.value;if((r.timestamp==e||r.eventTimestamp==e)&&r.type.includes("mp4"))return!0}}catch(e){a=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw i}}return!1},searchByPlate:function(){this.plateSearch&&this.$router.push({name:"device-plate",params:{devId:this.devIdComputed,plate:this.plateSearch}})},searchByPlateCancel:function(){this.plateComputed&&this.$router.push({name:"device",params:{devId:this.devIdComputed}})},searchByPlateChange:function(){this.plateSearch?this.searchByPlate():this.searchByPlateCancel()},checkPollingStatus:function(){return this.apolloStopPollingAt?Et().isAfter(this.apolloStopPollingAt)?(this.apolloStopPollingAt=null,this.$apollo.queries.data.stopPolling(),this.$apollo.queries.dataByPlate.stopPolling(),void(this.apolloPollingTimer&&clearInterval(this.apolloPollingTimer))):void 0:(this.$apollo.queries.data.stopPolling(),void this.$apollo.queries.dataByPlate.stopPolling())},openMediaDialog:function(e){var t=Object.assign({},this.$route.query);t.vid=e,this.$router.replace({query:t})}},apollo:{data:{query:function(){return Y},variables:function(){this.hydrated=!1,this.$store.commit("setDbMediaUploadsWithSpeed",{});var e=this.$store.state.currentDateRange.replace(/-/g,"").replace(/:/g,"").split(" ");return{device:this.devId,timestampFrom:e[0],timestampTo:e[1]}},skip:function(){return!!this.plateComputed},update:function(e){return this.checkPollingStatus(),this.$store.commit("setDbMediaUploadsWithSpeed",e.listMediaUploadsWithSpeed),Zt=Object.assign({},Zt,e),this.hydrated=!0,Zt}},dataByPlate:{query:function(){return J},variables:function(){return{device:this.devId,plate:this.plateComputed}},skip:function(){return!this.plateComputed},update:function(e){return this.checkPollingStatus(),e.listMediaUploadsByPlate.items.sort(function(e,t){return e.timestamp>t.timestamp?-1:t.timestamp>e.timestamp?1:0}),this.$store.commit("setDbMediaUploadsWithSpeed",e.listMediaUploadsByPlate),Zt=Object.assign({},Zt,e),this.hydrated=!0,Zt}}}},Xt=Kt,ea=Object(ve["a"])(Xt,Wt,Qt,!1,null,null,null);ea.options.__file="SpeedTable.vue";var ta,aa,ia=ea.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mx-0 px-0",attrs:{"justify-space-between":"","grid-list-xl":""}},[a("v-alert",{attrs:{value:this.$apollo.loading&&!e.hydratedCal,type:"info"}},[e._v("Checking what happened on "+e._s(e._f("tsToDateTextMonth")(this.$store.state.currentDate))+" ...")]),e.hydratedCal?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md4:"",sm6:"",xs12:""}},[e.hydratedCal?a("v-date-picker",{attrs:{"show-current":!0,"allowed-dates":e.allowedDates,min:"2018-08-13",max:e.$store.state.today,"header-color":"accent","first-day-of-week":"1",multiple:""},on:{input:e.dateChanged},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}):e._e()],1),a("v-flex",{attrs:{md8:"",sm6:"",xs12:""}},[a("div",{class:this.$apollo.loading?"":"invisible"},[a("v-progress-linear",{staticClass:"my-0 py-0",attrs:{height:"2",indeterminate:"",color:"blue-grey"}})],1),e.hydratedCal&&e.hydratedGraph?a("speed-chart-bar",{attrs:{chartData:this.chartData,options:this.chartOptions}}):e._e()],1)],1):e._e()],1)},sa=[],ra={name:"SpeedChartBar",extends:xt["a"],mixins:[xt["c"].reactiveProp],props:["chartData","options"],mounted:function(){this.renderChart(this.chartData,this.options)}},oa=ra,la=Object(ve["a"])(oa,ta,aa,!1,null,null,null);la.options.__file="SpeedChartBar.vue";var da=la.exports,ca={name:"SpeedChart",components:{SpeedChartLine:$t,SpeedChartBar:da},props:{devId:String},data:function(){var e=this.$store.state.currentDate,t=this.$route.query.vid;return t&&(e="".concat(t.slice(0,4),"-").concat(t.slice(4,6),"-").concat(t.slice(6,8)),this.$store.commit("setCurrentDate",e),this.$store.commit("setCurrentDateRange",e+"T00:00:00 "+e+"T23:59:59")),{hydratedCal:!1,hydratedGraph:!1,dateRange:[e],dateRangePrev:[e],rangeQueryStart:e+"T00:00:00",rangeQueryEnd:e+"T23:59:59",querySkip:!0,displayFormats:["DD MMM","DD MMM HH[h]","HH:mm"],chartData:{},chartOptions:ua,apolloQuery:ne}},computed:{radarMinSpeed:function(){return this.$store.state.radarMinSpeed},urlQueryVid:function(){return this.$route.query.vid}},watch:{urlQueryVid:function(e){if(e){var t="".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8));this.dateRange.includes(t)||(this.dateRangePrev=[t],this.dateRange=[t],this.dateChangedDataUpdate())}}},methods:{allowedDates:function(e){return this.allowedDatesData.dates.includes(e)},dateChanged:function(e){if(0==this.dateRange.length&&1==this.dateRangePrev.length)this.dateRange.push(this.dateRangePrev[0]);else if(2==this.dateRange.length&&1==this.dateRangePrev.length){this.dateRange.sort();var t=Et(this.dateRange[0]).add(1,"days");while(t<Et(this.dateRange[1])){var a=Et(t).format("YYYY-MM-DD");this.allowedDates(a)&&this.dateRange.push(a),t=Et(t).add(1,"days")}this.dateRange.sort()}else{var i=[],n=[];this.dateRange.length>this.dateRangePrev.length?(i=this.dateRange.slice(0),n=this.dateRangePrev.slice(0)):(i=this.dateRangePrev.slice(0),n=this.dateRange.slice(0));var s=i.map(function(e){if(n.indexOf(e)<0)return e});s.sort(),this.dateRange=[s[0]]}this.dateRange.sort(),this.dateRangePrev=this.dateRange.slice(0),this.dateChangedDataUpdate()},dateChangedDataUpdate:function(){this.dateRange[0],this.dateRange[this.dateRange.length-1];1==this.dateRange.length?(this.rangeQueryStart=this.dateRange[0]+"T00:00:00",this.rangeQueryEnd=this.dateRange[0]+"T23:59:59",this.apolloQuery=ne,this.chartOptions.scales.xAxes[0].time.displayFormats.hour="HH[h]"):this.dateRange.length<8?(this.rangeQueryStart=this.dateRange[0]+"T00:00:00",this.rangeQueryEnd=this.dateRange[this.dateRange.length-1]+"T23:59:59",this.apolloQuery=ne,this.chartOptions.scales.xAxes[0].time.displayFormats.hour="DD MMM HH[h]"):(this.rangeQueryStart=this.dateRange[0]+"T00:00:00",this.rangeQueryEnd=this.dateRange[this.dateRange.length-1]+"T23:59:59",this.apolloQuery=se,this.chartOptions.scales.xAxes[0].time.displayFormats.hour="DD MMM"),this.querySkip=!1,this.$apollo.queries.devSpeedSum.refetch(),this.$store.commit("setCurrentDateRange",this.rangeQueryStart+" "+this.rangeQueryEnd)}},apollo:{devSpeedSum:{query:function(){return this.apolloQuery},variables:function(){return this.hydratedGraph=!1,{device:this.devId,timestampFrom:this.rangeQueryStart,timestampTo:this.rangeQueryEnd}},skip:function(){return this.querySkip},update:function(e){var t={};e.listDeviceSpeedMin?t=e.listDeviceSpeedMin.items:e.listDeviceSpeedHr?t=e.listDeviceSpeedHr.items:e.listDeviceSpeedDay&&(t=e.listDeviceSpeedDay.items);var a=this.radarMinSpeed,i={chartData:{labels:t.map(function(e){return e.timestamp.slice(0,16)}),datasets:[{label:"speed limit",borderWidth:0,showLine:!1,pointRadius:0,data:t.map(function(e){return e.maxSpeed<a?e.maxSpeed:a})},{label:"over limit, km/h",backgroundColor:"#EF5350",borderWidth:0,showLine:!1,data:t.map(function(e){return e.maxSpeed<=a?0:e.maxSpeed-a})}]}};return this.chartData=i.chartData,i},result:function(){this.hydratedGraph=!0,this.querySkip=!0}},allowedDatesData:{query:function(){return re},variables:function(){return{device:this.devId}},update:function(e){var t={dates:e.listDeviceSpeedLast90Days.items.map(function(e){return e.timestamp.slice(0,10)})};return 0==t.dates.length?t:(this.dateRange[0]>t.dates[0]&&(this.dateRange=[t.dates[0]],this.dateRangePrev=[t.dates[0]],this.rangeQueryStart=this.dateRange[0]+"T00:00:00",this.rangeQueryEnd=this.dateRange[0]+"T23:59:59",this.$store.commit("setCurrentDateRange",t.dates[0]+"T00:00:00 "+t.dates[0]+"T23:59:59")),this.hydratedCal=!0,t)},result:function(){this.hydratedCal&&(this.querySkip=!1,this.$apollo.queries.devSpeedSum.refetch())}}}},ua={responsive:!0,maintainAspectRatio:!1,animation:{duration:1e3},hover:{animationDuration:0},responsiveAnimationDuration:1e3,plugins:{datalabels:{display:!1}},elements:{line:{fill:!1,borderWidth:1},point:{pointRadius:0}},scales:{xAxes:[{type:"time",stacked:!0,time:{displayFormats:{minute:"HH[h]"}}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0}}]}},va=ca,ma=Object(ve["a"])(va,na,sa,!1,null,null,null);ma.options.__file="SpeedChart.vue";var pa=ma.exports,ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{fluid:"","pl-0":"","pr-0":"","mt-4":"","mb-0":"","pb-0":""}},[a("v-layout",{attrs:{row:"",xs12:"",wrap:""}},[a("v-flex",{attrs:{grow:"","text-sm-left":""}},[a("v-switch",{attrs:{label:"Gallery"},model:{value:e.data.showGallery,callback:function(t){e.$set(e.data,"showGallery",t)},expression:"data.showGallery"}}),a("v-spacer")],1),e.data.showGallery?a("v-flex",{attrs:{shrink:e.$vuetify.breakpoint.smAndUp,"text-xs-center":e.$vuetify.breakpoint.xsOnly,xs12:e.$vuetify.breakpoint.xsOnly}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.refreshToNext(-1)}}},[a("v-icon",{staticClass:"fal",attrs:{small:""}},[e._v("fa-angle-double-left")])],1),a("v-btn",{attrs:{outline:""},on:{click:function(t){return t.stopPropagation(),e.toggleCal()}}},[a("v-icon",{staticClass:"fal pr-2",attrs:{small:""}},[e._v("fa-calendar")]),e._v("\n          "+e._s(e._f("tsToDateTextMonth")(this.data.dateShowing))+"\n        ")],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.refreshToNext(1)}}},[a("v-icon",{staticClass:"fal",attrs:{small:""}},[e._v("fa-angle-double-right")])],1)],1):e._e(),e.data.showGallery?a("v-flex",{attrs:{shrink:e.$vuetify.breakpoint.smAndUp,"text-xs-center":e.$vuetify.breakpoint.xsOnly,xs12:e.$vuetify.breakpoint.xsOnly}},[a("v-btn",{attrs:{icon:"",disabled:!this.data.eventsPresent,color:this.data.eventsOnly?"error":"white"},on:{click:function(t){e.data.eventsOnly=!e.data.eventsOnly}}},[a("v-icon",{staticClass:"fal",attrs:{small:"",color:this.data.eventsOnly?"white":"error"}},[e._v("fa-exclamation-triangle")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.refreshToToday()}}},[a("v-icon",{staticClass:"fal",attrs:{small:""}},[e._v("fa-sync")])],1)],1):e._e()],1)],1),e.data.showGallery?a("v-container",{attrs:{"grid-list-lg":"",fluid:"","justify-space-between":"","pl-0":"","pr-0":""}},[a("div",{class:e.galleryLoadingClass},[a("v-progress-linear",{staticClass:"my-0 py-0",attrs:{height:"2",indeterminate:"",color:"blue-grey"}})],1),a("v-alert",{attrs:{value:0==e.data.imgCount,type:"warning"}},[e._v("No images for "+e._s(e._f("tsToDateTextMonth")(this.data.dateShowing)))]),a("v-expand-transition",[e.data.showCal?a("v-date-picker",{staticClass:"mt-3",attrs:{color:"accent","full-width":"",landscape:"","first-day-of-week":"1",max:this.$store.state.today},model:{value:e.data.dateShowing,callback:function(t){e.$set(e.data,"dateShowing",t)},expression:"data.dateShowing"}}):e._e()],1),a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.filteredlistMediaUploadsItems,function(t){return a("v-flex",{key:t.timestamp,attrs:{md3:"",sm6:"",xs12:""}},[!e.data.eventsOnly||t.eventTimestamp?a("a",{attrs:{target:"_blank",href:"https://"+e.mediaBaseDomain+"/"+e.devIdComputed+"/resized/fhd/"+t.name+".jpg"}},[a("v-img",{attrs:{src:"https://"+e.mediaBaseDomain+"/"+e.devIdComputed+"/resized/thumb/"+t.name+".jpg",width:"100%"}},[a("v-container",{attrs:{"fill-height":"",fluid:"","pa-0":""}},[a("v-layout",{attrs:{"align-end":"","justify-start":"",row:"","fill-height":"","ma-0":""}},[a("v-flex",{attrs:{xs3:"","align-start":"",flexbox:"","pa-0":""}},[a("v-chip",{staticClass:"ma-0",attrs:{small:"",label:"",color:e.eventColor(t.eventTimestamp),"ma-0":""}},[e._v(e._s(e._f("tsToTimeDate")(t.timestamp)))])],1)],1)],1)],1)],1):e._e()])}),1)],1):e._e()],1)},fa=[],ga={name:"MediaForStills",props:{devId:String},data:function(){return Object.assign({},ba)},created:function(){this.data&&this.data.querySkip&&(this.data.querySkip=!1);var e=this.$options.name+"data.showGallery",t=this;this.$getItem(e).then(function(e){t.data.showGallery=0!=e})},computed:{devIdComputed:function(){return this.devId?this.devId:this.$route.params.devId?this.$route.params.devId:void 0},mediaBaseDomain:function(){return o.mediaBaseDomain},galleryLoadingClass:function(){if(!this.$apollo.loading)return"invisible"},filteredlistMediaUploadsItems:function(){var e=this.data.listMediaUploads.items.filter(function(e){return e.type.includes("jpg")});return this.data.imgCount>0&&(this.data.imgCount=e.length),e}},methods:{toggleCal:function(){this.data.showCal=!this.data.showGallery||!this.data.showCal,this.data.showGallery=!0},refreshToToday:function(){this.data.querySkip=!1,this.data.showCal=!1,this.data.dateShowing=St()(new Date,"yyyy-mm-dd")},refreshToNext:function(e){var t=new Date(this.data.dateShowing);t.setDate(t.getDate()+e),this.data.querySkip=!1,this.data.showCal=!1,this.data.dateShowing=St()(t,"yyyy-mm-dd")},eventColor:function(e){return e?(this.data.eventsPresent=!0,"rgba(255,50,50,0.6)"):"rgba(255,255,255,0.6)"}},watch:{"data.dateShowing":function(){this.data.querySkip=!1,this.data.showCal=!1},"data.showGallery":function(e){var t=this.$options.name+"data.showGallery";this.$setItem(t,e)}},apollo:{data:{query:function(){return Q},variables:function(){return{device:this.devIdComputed,limit:500,timestamp:this.data.dateShowing.replace(/-/g,"")}},skip:function(){return this.data.querySkip},update:function(e){this.data.querySkip=!0,this.data.eventsPresent=!1,e.imgCount=e.listMediaUploads.items.length;var t=Object.assign({},this.data,e);return t}}}},ba={data:{dateShowing:St()(new Date,"yyyy-mm-dd"),querySkip:!1,showCal:!1,showGallery:!0,imgCount:-1,eventsPresent:!1,eventsOnly:!1,listMediaUploads:{items:[]}}},_a=ga,ya=Object(ve["a"])(_a,ha,fa,!1,null,null,null);ya.options.__file="MediaForStills.vue";var Sa=ya.exports,Da={name:"vDevice",props:{devId:String},components:{DeviceInfo:Ze,SpeedTable:ia,SpeedChart:pa,MediaForSpeed:Ht,MediaForStills:Sa},beforeCreate:function(){this.$store.commit("setHasRadar",!1)},computed:{devIdComputed:function(){return this.devId?this.devId:this.$route.params.devId?this.$route.params.devId:void 0},plateComputed:function(){return this.$route.params.plate}}},wa=Da,Ca=Object(ve["a"])(wa,ft,gt,!1,null,null,null);Ca.options.__file="vDevice.vue";var Ia=Ca.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",[a("h1",[e._v("Redirecting ... ")])])],1)],1)},ka=[],ja={name:"home-public",data:function(){return{}},created:function(){window.location="https://sensorable.io"}},Ra=ja,$a=Object(ve["a"])(Ra,xa,ka,!1,null,null,null);$a.options.__file="vRedirect.vue";var Ma=$a.exports,Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:""}},[a("v-flex",[a("h1",[e._v("Page not found ...")])])],1)],1)},Ta=[],Aa={name:"home-public",data:function(){return{}},created:function(){var e=this.$router;setTimeout(function(){e.push({name:"home"})},3e3)}},Oa=Aa,Pa=Object(ve["a"])(Oa,Ua,Ta,!1,null,null,null);Pa.options.__file="v404.vue";var qa=Pa.exports;n["default"].use(v["a"]);var Ea=new v["a"]({mode:"hash",routes:[{path:"/",name:"home",component:ot},{path:"/device/:devId/np/:plate",name:"device-plate",component:Ia},{path:"/device/:devId",name:"device",component:Ia},{path:"/home-public",name:"home-public",component:ht},{path:"/about",component:Ma,name:"about",beforeEnter:function(e,t,a){t.name||a("/"),a()}},{path:"*",name:"catch-all",component:qa}]}),La="CognitoOriginatorPage",Fa="CognitoLastReloadedPage";function Ba(){console.log("cognitoRelogin"),""!=window.location.search?Na():(localStorage.setItem(La,window.location.href),window.location.href="https://".concat(o.AppWebDomain,"/login?redirect_uri=").concat(o.RedirectUriSignIn,"&client_id=").concat(o.ClientId,"&response_type=code"))}function Va(){var e=window.location.search;return!!e&&!!e.startsWith("?code=")}function Na(){var e=window.location.href.split("#")[0];console.log(window.location.href),console.log(e);var t=Object.assign({ClientId:o.ClientId,UserPoolId:o.UserPoolId,AppWebDomain:o.AppWebDomain,TokenScopesArray:o.TokenScopesArray,RedirectUriSignIn:o.RedirectUriSignIn,RedirectUriSignOut:o.RedirectUriSignOut}),a=new u["a"](t),i=!1;a.userhandler={onSuccess:function(){i=!0,Ga(Ea)},onFailure:function(){if(!i){var e=localStorage.getItem(Fa);e!=window.location.href&&""!=window.location.search?(localStorage.setItem(Fa,window.location.href),window.location.reload()):window.location.href=window.location.href.split("?")[0].split("#")[0]}}},a.parseCognitoWebResponse(e)}function Ga(){var e=localStorage.getItem(La);localStorage.removeItem(La),e&&""!=e?window.location.href=e:window.location.href.includes("?")&&(window.location.href=window.location.href.split("?code=")[0])}var za={name:"App",data:function(){return{hydrated:!1,dialogLogout:!1,userEmail:"",emailVerified:!1,appName:""}},created:function(){this.appName=o.appName;var e=this.$router,t=this;Va()?Na():window.location.search?window.location.replace(window.location.href.split("?")[0]):d["Auth"].currentSession().then(function(){t.$store.commit("setLoggedin",!0),Ga(e),t.getCurrectUserDetails()}).catch(function(e){""!=window.location.search?Na():Ba()})},methods:{signOut:function(){this.dialogLogout=!1;this.$store.commit("setLoggedin",!1),d["Auth"].signOut({global:!0}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)}).then(function(){window.location.href=o.RedirectUriSignOut})},getCurrectUserDetails:function(){var e=this;d["Auth"].currentUserInfo().then(function(t){t&&(e.userEmail=t.attributes.email,e.emailVerified=t.attributes.email_verified,l["b"](function(t){t.setUser({email:e.userEmail})}))}).catch(function(e){console.error(e)})}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$apollo.provider.defaultClient.hydrated();case 2:this.hydrated=!0;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},Ha=za,Wa=(a("034f"),Object(ve["a"])(Ha,s,r,!1,null,null,null));Wa.options.__file="App.vue";var Qa=Wa.exports,Ya=a("ce5b"),Ja=a.n(Ya),Za=a("c0a4"),Ka=a.n(Za),Xa={theme:{primary:Ka.a.red.darken1,secondary:Ka.a.red.lighten4,accent:Ka.a.indigo.base,info:Ka.a.blue.lighten1,success:Ka.a.green.darken1,warning:Ka.a.amber.darken1,toggleOn:Ka.a.green.darken1},iconfont:"md"},ei=a("3b8f"),ti=a.n(ei),ai=a("dc21"),ii=a("e594"),ni=a("12d0"),si=a.n(ni);if(o.SentryDSN&&ai["a"]({dsn:o.SentryDSN,integrations:[new ii["a"]({Vue:n["default"],attachProps:!0})]}),o.MatomoHost&&o.MatomoSiteId){n["default"].use(si.a,{host:o.MatomoHost,siteId:o.MatomoSiteId,router:Ea,requireConsent:!1,trackerFileName:"matomo",debug:!0});var ri=location.href;window.addEventListener("hashchange",function(){window._paq.push(["setReferrerUrl",ri]),ri=""+window.location.hash.substr(1),window._paq.push(["setCustomUrl",ri]),window._paq.push(["setDocumentTitle","My New Title"]),window._paq.push(["deleteCustomVariables","page"]),window._paq.push(["setGenerationTimeMs",0]),window._paq.push(["trackPageView"])})}function oi(e){switch(e){case"01":return"Jan";case"02":return"Feb";case"03":return"Mar";case"04":return"Apr";case"05":return"May";case"06":return"Jun";case"07":return"Jul";case"08":return"Aug";case"09":return"Sep";case"10":return"Oct";case"11":return"Nov";case"12":return"Dec"}}n["default"].filter("tsToTimeDate",function(e){if(!e)return e;var t=e.replace(/-/g,"").replace(/:/g,"");return t.slice(9,11)+":"+t.slice(11,13)+"  "+t.slice(6,8)+"/"+t.slice(4,6)+"/"+t.slice(2,4)}),n["default"].filter("tsToMMMDDHHmm",function(e){if(!e)return e;var t=e.replace(/-/g,"").replace(/:/g,"");return t.slice(6,8)+" "+oi(t.slice(4,6))+" "+t.slice(9,11)+":"+t.slice(11,13)}),n["default"].filter("tsToTime",function(e){if(!e)return e;var t=e.replace(/-/g,"").replace(/:/g,"");return t.slice(9,11)+":"+t.slice(11,13)}),n["default"].filter("tsToDate",function(e){if(!e)return e;var t=e.replace(/-/g,"").replace(/:/g,"");return t.slice(6,8)+"/"+t.slice(4,6)+"/"+t.slice(0,4)}),n["default"].filter("tsToDateTextMonth",function(e){if(!e)return e;var t=e.replace(/-/g,"").replace(/:/g,"");return t.slice(6,8)+" "+oi(t.slice(4,6))+" "+t.slice(0,4)}),n["default"].filter("tsTo_DDMMMHHh",function(e){return e?e.slice(8,10)+" "+oi(e.slice(5,7))+" "+e.slice(11,13)+"h":e}),n["default"].filter("tsTo_DDMMM",function(e){return e?e.slice(8,10)+" "+oi(e.slice(5,7)):e});var li=a("2f62");n["default"].use(li["a"]);var di=new li["a"].Store({state:{currentDate:Et().format("YYYY-MM-DD"),currentDateRange:Et().format("YYYY-MM-DD")+"T00:00:00 "+Et().format("YYYY-MM-DD")+"T23:59:59",today:Et().format("YYYY-MM-DD"),hasRadar:!0,hasRadarDevId:"",radarMinSpeed:"",loggedin:!1,dbMediaUploadsWithSpeed:{},lastMediaUploadsReqTsUtc:""},mutations:{setCurrentDate:function(e,t){e.currentDate=t},setCurrentDateRange:function(e,t){e.currentDateRange=t},setHasRadar:function(e,t){e.hasRadar=t},setRadarMinSpeed:function(e,t){e.radarMinSpeed=t},setHasRadarDevId:function(e,t){e.hasRadarDevId=t},setLoggedin:function(e,t){e.loggedin=t},setDbMediaUploadsWithSpeed:function(e,t){e.dbMediaUploadsWithSpeed=t},setLastMediaUploadsReqTsUtc:function(e,t){e.lastMediaUploadsReqTsUtc=t}}}),ci=a("7f92"),ui=a.n(ci),vi=a("a002"),mi=a("522d"),pi=a("755e");c.a.configure({Auth:{region:o.region,userPoolId:o.UserPoolId,userPoolWebClientId:o.ClientId,oauth:{domain:o.AppWebDomain,scope:o.TokenScopesArray,redirectSignIn:o.RedirectUriSignIn,redirectSignOut:o.RedirectUriSignOut}}});var hi=new ui.a({url:o.graphqlEndpoint,region:o.region,auth:{type:o.authenticationType,jwtToken:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["Auth"].currentSession();case 3:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 6:e.prev=6,e.t0=e["catch"](0),Ba();case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},offlineConfig:{storage:vi},disableOffline:!1},{defaultOptions:{watchQuery:{fetchPolicy:"network-only"}}}),fi=new mi["a"]({defaultClient:hi,defaultOptions:{$query:{fetchPolicy:"network-only",errorPolicy:o.errorPolicy}}});n["default"].use(pi,{load:{key:o.GoogleMapsKey}}),Ea.afterEach(function(e){e.params.devId?document.title="Cam "+e.params.devId:document.title=o.appName}),n["default"].use(ti.a),n["default"].use(Ja.a,Xa),n["default"].use(mi["a"]),n["default"].config.productionTip=!1,new n["default"]({el:"#app",router:Ea,store:di,components:{App:Qa},apolloProvider:fi,render:function(e){return e(Qa)}})},"5da9":function(e,t,a){var i=a("c8b5");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("499e").default;n("7210a84a",i,!0,{sourceMap:!1,shadowMode:!1})},"88f6":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n.application a,.headline a{color:inherit;text-decoration:none\n}\n.invisible{visibility:hidden\n}\n.displaynone{display:none\n}\n.clickable{cursor:pointer\n}\ncode,kbd{white-space:normal\n}\nimg.plate{max-height:40px\n}\n.dialog-plate{width:100%\n}\n.dialog-plate span span{background-color:#eee;border:1px solid #000;border-radius:5px;display:inline-block;font-size:.8em;letter-spacing:3px;padding:0 5px\n}\ntable.v-table tbody td.npbg{font-size:1.2em\n}\ntable.v-table tbody td.npbg:hover{background-color:#263238;color:#cfd8dc\n}",""])},a75c:function(e,t,a){e.exports=a.p+"img/demo-vid-frame.dd559e5c.jpg"},c8b5:function(e,t,a){t=e.exports=a("2350")(!1),t.i(a("88f6"),""),t.push([e.i,"",""])}});
//# sourceMappingURL=app.654a9a0c.js.map